<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="generator" content="made with love by dartdoc 5.1.0-dev">
  <meta name="description" content="safetynet_attestation API docs, for the Dart programming language.">
  <title>safetynet_attestation - Dart API docs</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">

  
</head>


<body data-base-href=""
      data-using-base-href="false">

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="https://github.com/CodesFirst/safetynet_attestation">safetynet_attestation package</a></li>
  </ol>
  <div class="self-name">safetynet_attestation</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<main>


  <div id="dartdoc-main-content" class="main-content">
      
<section class="desc markdown">
  <h1 id="flutter-safetynet-attestation-plugin-for-android">Flutter SafetyNet Attestation plugin for Android</h1>
<h3 id="note">Note</h3>
<p>Original repository: <a href="https://github.com/g123k/flutter_safetynet_attestation">https://github.com/g123k/flutter_safetynet_attestation</a></p>
<p>The problem with the original repository is that it has not been updated since 2019, for this reason this repository was created in order to maintain an updated code and eliminate the warning message when compiling a flutter application.</p>
<h2 id="what-is-safetynet">What is SafetyNet?</h2>
<blockquote>
<p>The SafetyNet Attestation API helps you assess the security and compatibility of the Android environments in which your apps run. You can use this API to analyze devices that have installed your app.'</p>
</blockquote>
<p>Please check the <a href="https://developer.android.com/training/safetynet/attestation">documentation here</a>.</p>
<h2 id="getting-started">Getting Started</h2>
<h3 id="ios">iOS</h3>
<p>The plugin won't work iOS, because SafetyNet is only available for Android devices.</p>
<h3 id="android">Android</h3>
<ol>
<li>Open the <a href="https://console.developers.google.com/apis/library">Google APIs console</a> and enable <em>Android Device Verification API</em></li>
<li>Create your API key</li>
<li>In your Android project, please add the SafetyNet API key in your <code>AndroidManifest.xml</code>:</li>
</ol>
<pre class="language-xml"><code class="language-xml">&lt;meta-data android:name="safetynet_api_key"
            android:value="yourapikey"/&gt;
</code></pre>
<h3 id="dart">Dart</h3>
<p>The <em>SafetyNet API</em> is requiring a working version of the Google Play Services. A method is available to check if they are available on the device:</p>
<pre class="language-dart"><code class="language-dart">SafetynetAttestation.googlePlayServicesAvailability();
</code></pre>
<p>Then you have to pass a nonce (in a <em>String</em> or a <em>byte array</em>) to the following method:</p>
<pre class="language-dart"><code class="language-dart">SafetynetAttestation.safetyNetAttestationJwt('&lt;your-nonce&gt;');
</code></pre>
<p>It will then return a JWT string. Google recommends to check this JWT on your server. Please read the <a href="https://developer.android.com/training/safetynet/attestation#architecture">official documentation for more details</a>.</p>
<p>If you want to get directly the payload from the JWT string, you can call instead:</p>
<pre class="language-dart"><code class="language-dart">SafetynetAttestation.safetyNetAttestationPayload('&lt;your-nonce&gt;');
</code></pre>
<p>You will then receive a <em>JWSPayloadModel</em> object with this kind of content:</p>
<pre class="language-json"><code class="language-json">{
  "nonce": "R2Rra24fVm5xa2Mg",
  "timestampMs": 9860437986543,
  "apkPackageName": "com.package.name.of.requesting.app",
  "apkCertificateDigestSha256": ["base64 encoded, SHA-256 hash of the
                                  certificate used to sign requesting app"],
  "apkDigestSha256": ["base64 encoded, SHA-256 hash of
                      the APK installed on a user's device"],
  "ctsProfileMatch": true,
  "basicIntegrity": true,
}
</code></pre>
</section>


      <section class="summary">
          <h2>Libraries</h2>
        <dl>
          <dt id="jws_payload_model">
  <span class="name"><a href="models_jws_payload_model/models_jws_payload_model-library.html">jws_payload_model</a></span> 

</dt>
<dd>
</dd>

          <dt id="safetynet_attestation">
  <span class="name"><a href="safetynet_attestation/safetynet_attestation-library.html">safetynet_attestation</a></span> 

</dt>
<dd>
</dd>

        </dl>
      </section>

  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
  <li><a href="https://github.com/CodesFirst/safetynet_attestation">safetynet_attestation package</a></li>
</ol>


    <h5 class="hidden-xs"><span class="package-name">safetynet_attestation</span> <span class="package-kind">package</span></h5>
    <ol>
      <li class="section-title">Libraries</li>
      <li><a href="models_jws_payload_model/models_jws_payload_model-library.html">jws_payload_model</a></li>
      <li><a href="safetynet_attestation/safetynet_attestation-library.html">safetynet_attestation</a></li>
</ol>

  </div>

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div>

</main>

<footer>
  <span class="no-break">
    safetynet_attestation
      0.0.4
  </span>

  
</footer>



<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/script.js?v1"></script>



</body>

</html>

